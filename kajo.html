<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kajo — Faint Light in Darkness</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400&family=DM+Sans:opsz,wght@9..40,300;9..40,400;9..40,500&display=swap" rel="stylesheet">

  <!-- Three.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <!-- GSAP + ScrollTrigger -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

  <style>
    :root {
      /* Nordic Night Sky */
      --deep-night: #050a12;
      --night-blue: #0a1628;
      --midnight: #0f1d32;
      --twilight: #1a2d4a;

      /* Aurora Colors */
      --aurora-teal: #00d4aa;
      --aurora-cyan: #22d3ee;
      --aurora-purple: #8b5cf6;
      --aurora-pink: #ec4899;
      --aurora-blue: #3b82f6;

      /* Ice & Snow */
      --ice-white: #f8fafc;
      --frost: #e2e8f0;
      --silver: #94a3b8;
      --steel: #64748b;

      /* Forest */
      --pine-dark: #0d1117;
      --pine-mid: #1a2332;
      --pine-light: #2d3748;

      /* Typography */
      --font-display: 'Cormorant Garamond', serif;
      --font-body: 'DM Sans', sans-serif;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    html.lenis {
      height: auto;
    }

    body {
      font-family: var(--font-body);
      background: var(--deep-night);
      color: var(--ice-white);
      overflow-x: hidden;
      line-height: 1.6;
    }

    /* Smooth Scroll Container */
    .scroll-container {
      position: relative;
    }

    /* ========== NAVIGATION ========== */
    .nav {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 5;
      padding: 1.5rem 3rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      mix-blend-mode: difference;
    }

    .nav-logo {
      font-family: var(--font-display);
      font-size: 1.75rem;
      font-weight: 300;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--ice-white);
      text-decoration: none;
    }

    .nav-links {
      display: flex;
      gap: 2.5rem;
      list-style: none;
    }

    .nav-links a {
      font-size: 0.75rem;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: var(--ice-white);
      text-decoration: none;
      opacity: 0.7;
      transition: opacity 0.3s ease;
    }

    .nav-links a:hover,
    .nav-links a.active {
      opacity: 1;
    }

    /* Section Indicator */
    .section-indicator {
      position: fixed;
      right: 2rem;
      top: 50%;
      transform: translateY(-50%);
      z-index: 5;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .indicator-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--ice-white);
      opacity: 0.3;
      transition: all 0.4s ease;
      cursor: pointer;
    }

    .indicator-dot.active {
      opacity: 1;
      transform: scale(1.5);
      background: var(--aurora-teal);
      box-shadow: 0 0 20px var(--aurora-teal);
    }

    /* ========== FIXED AURORA BACKGROUND ========== */
    .aurora-bg {
      position: fixed;
      inset: 0;
      z-index: 0;
      pointer-events: none;
    }

    #aurora-canvas {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
    }

    /* Mountain Silhouettes - Fixed */
    .mountains-svg {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 45%;
      z-index: 1;
      pointer-events: none;
    }

    /* Water Reflection - Fixed */
    .water-reflection {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 15%;
      background: linear-gradient(
        to bottom,
        rgba(0, 15, 25, 0.4) 0%,
        rgba(0, 20, 30, 0.7) 50%,
        rgba(0, 15, 25, 0.9) 100%
      );
      z-index: 2;
      pointer-events: none;
    }

    .water-reflection::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(
        90deg,
        transparent 0%,
        rgba(0, 180, 140, 0.03) 30%,
        rgba(0, 200, 160, 0.06) 50%,
        rgba(0, 180, 140, 0.03) 70%,
        transparent 100%
      );
      animation: shimmer 10s ease-in-out infinite;
    }

    @keyframes shimmer {
      0%, 100% { opacity: 0.4; }
      50% { opacity: 0.8; }
    }

    /* ========== HERO SECTION ========== */
    .hero {
      position: relative;
      height: 100vh;
      z-index: 10;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Hero Content */
    .hero-content {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 10;
      text-align: center;
      padding: 2rem;
    }

    .hero-title {
      font-family: var(--font-display);
      font-size: clamp(4rem, 15vw, 12rem);
      font-weight: 300;
      letter-spacing: 0.3em;
      margin-left: 0.3em; /* Compensate for letter-spacing */
      text-transform: uppercase;
      margin-bottom: 1rem;
      background: linear-gradient(
        180deg,
        var(--ice-white) 0%,
        var(--aurora-teal) 50%,
        var(--aurora-cyan) 100%
      );
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      opacity: 0;
      transform: translateY(30px);
      animation: fadeInUp 1.5s ease-out 0.5s forwards;
    }

    .hero-subtitle {
      font-family: var(--font-display);
      font-size: clamp(1rem, 2.5vw, 1.5rem);
      font-weight: 300;
      font-style: italic;
      letter-spacing: 0.2em;
      color: var(--silver);
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 1.2s ease-out 1s forwards;
    }

    .hero-tagline {
      margin-top: 3rem;
      font-size: 0.875rem;
      letter-spacing: 0.3em;
      text-transform: uppercase;
      color: var(--frost);
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 1.2s ease-out 1.4s forwards;
    }

    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .scroll-indicator {
      position: absolute;
      bottom: 3rem;
      left: 50%;
      transform: translateX(-50%);
      z-index: 10;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
      opacity: 0;
      animation: fadeInUp 1s ease-out 2s forwards;
    }

    .scroll-indicator span {
      font-size: 0.7rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--silver);
    }

    .scroll-line {
      width: 1px;
      height: 60px;
      background: linear-gradient(to bottom, var(--aurora-teal), transparent);
      animation: scrollPulse 2s ease-in-out infinite;
    }

    @keyframes scrollPulse {
      0%, 100% { transform: scaleY(1); opacity: 1; }
      50% { transform: scaleY(0.5); opacity: 0.5; }
    }

    /* ========== CONTENT SECTIONS - HALF SCREEN PANELS ========== */
    .section {
      position: relative;
      min-height: 100vh;
      z-index: 10;
      display: flex;
      align-items: center;
    }

    /* Half-width panel */
    .panel {
      width: 50%;
      min-height: 100vh;
      padding: 6rem 4rem;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    /* Panel positions */
    .panel-left {
      margin-right: auto;
    }

    .panel-right {
      margin-left: auto;
    }

    /* Panel backgrounds */
    .panel-light {
      background: var(--ice-white);
      color: var(--night-blue);
    }

    .panel-dark {
      background: var(--deep-night);
      color: var(--ice-white);
    }

    .panel-twilight {
      background: var(--midnight);
      color: var(--ice-white);
    }

    .section-container {
      max-width: 600px;
    }

    /* Section Headers */
    .section-label {
      font-size: 0.7rem;
      letter-spacing: 0.4em;
      text-transform: uppercase;
      color: var(--aurora-teal);
      margin-bottom: 1rem;
    }

    .section-title {
      font-family: var(--font-display);
      font-size: clamp(2.5rem, 6vw, 5rem);
      font-weight: 300;
      line-height: 1.1;
      margin-bottom: 2rem;
    }

    .panel-light .section-title {
      color: var(--night-blue);
    }

    .section-description {
      font-size: 1.125rem;
      line-height: 1.8;
      max-width: 500px;
      color: var(--silver);
    }

    .panel-light .section-description {
      color: var(--twilight);
    }

    /* Simple list for minimal content */
    .simple-list {
      margin-top: 2.5rem;
      display: flex;
      flex-direction: column;
      gap: 1.25rem;
    }

    .simple-list-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      font-size: 1rem;
      color: var(--silver);
    }

    .panel-light .simple-list-item {
      color: var(--twilight);
    }

    .simple-list-item::before {
      content: '';
      width: 6px;
      height: 6px;
      background: var(--aurora-teal);
      border-radius: 50%;
      flex-shrink: 0;
    }

    /* ========== PHILOSOPHY LIST ========== */
    .philosophy-list {
      margin-top: 2.5rem;
      display: flex;
      flex-direction: column;
      gap: 1.25rem;
    }

    .philosophy-item {
      display: flex;
      align-items: flex-start;
      gap: 1rem;
    }

    .philosophy-icon {
      width: 20px;
      height: 20px;
      flex-shrink: 0;
      margin-top: 0.2rem;
    }

    .philosophy-icon svg {
      width: 100%;
      height: 100%;
      stroke: var(--aurora-teal);
      fill: none;
      stroke-width: 1.5;
    }

    .philosophy-text h4 {
      font-family: var(--font-display);
      font-size: 1.1rem;
      font-weight: 500;
      margin-bottom: 0.15rem;
      color: var(--ice-white);
    }

    .panel-light .philosophy-text h4 {
      color: var(--night-blue);
    }

    .philosophy-text p {
      font-size: 0.85rem;
      color: var(--silver);
    }

    .panel-light .philosophy-text p {
      color: var(--steel);
    }

    /* ========== CTA BUTTON ========== */
    .cta-button {
      display: inline-flex;
      align-items: center;
      gap: 0.75rem;
      padding: 1rem 2rem;
      background: transparent;
      border: 1px solid var(--aurora-teal);
      color: var(--aurora-teal);
      font-family: var(--font-body);
      font-size: 0.75rem;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      text-decoration: none;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 2rem;
    }

    .cta-button:hover {
      background: var(--aurora-teal);
      color: var(--night-blue);
      box-shadow: 0 0 30px rgba(0, 212, 170, 0.3);
    }

    .cta-button svg {
      width: 14px;
      height: 14px;
      stroke: currentColor;
      fill: none;
      stroke-width: 2;
      transition: transform 0.3s ease;
    }

    .cta-button:hover svg {
      transform: translateX(4px);
    }

    /* ========== FOOTER ========== */
    footer {
      position: relative;
      z-index: 10;
      padding: 4rem 3rem;
      background: var(--deep-night);
      border-top: 1px solid rgba(255, 255, 255, 0.05);
    }

    .footer-content {
      max-width: 1400px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .footer-logo {
      font-family: var(--font-display);
      font-size: 1.25rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--ice-white);
    }

    .footer-text {
      font-size: 0.8rem;
      color: var(--steel);
    }

    .footer-links {
      display: flex;
      gap: 2rem;
    }

    .footer-links a {
      font-size: 0.75rem;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--silver);
      text-decoration: none;
      transition: color 0.3s ease;
    }

    .footer-links a:hover {
      color: var(--aurora-teal);
    }

    /* ========== RESPONSIVE ========== */
    @media (max-width: 1024px) {
      .panel {
        width: 65%;
        padding: 5rem 3rem;
      }
    }

    @media (max-width: 768px) {
      .nav {
        padding: 1rem 1.5rem;
      }

      .nav-links {
        display: none;
      }

      .panel {
        width: 100%;
        padding: 4rem 2rem;
      }

      .section-indicator {
        display: none;
      }

      .footer-content {
        flex-direction: column;
        gap: 2rem;
        text-align: center;
      }

      .section-title {
        font-size: clamp(2rem, 8vw, 3rem);
      }
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav class="nav">
    <a href="#" class="nav-logo">Kajo</a>
    <ul class="nav-links">
      <li><a href="#about">About</a></li>
      <li><a href="#sellers">Sellers</a></li>
      <li><a href="#investors">Investors</a></li>
      <li><a href="#operators">Operators</a></li>
    </ul>
  </nav>

  <!-- Section Indicator -->
  <div class="section-indicator">
    <div class="indicator-dot active" data-section="hero"></div>
    <div class="indicator-dot" data-section="about"></div>
    <div class="indicator-dot" data-section="sellers"></div>
    <div class="indicator-dot" data-section="investors"></div>
    <div class="indicator-dot" data-section="operators"></div>
  </div>

  <!-- FIXED AURORA BACKGROUND -->
  <div class="aurora-bg">
    <canvas id="aurora-canvas"></canvas>

    <!-- Mountain Silhouettes -->
    <svg class="mountains-svg" viewBox="0 0 1920 500" preserveAspectRatio="xMidYMax slice">
      <!-- Far distant mountains -->
      <path class="mountain-layer mountain-far" fill="#0c1824" opacity="0.4" d="M0,500 L0,380 L120,340 L280,380 L400,300 L580,350 L720,260 L900,320 L1050,240 L1200,300 L1350,220 L1500,280 L1650,240 L1800,300 L1920,260 L1920,500 Z"/>
      <!-- Distant mountains -->
      <path class="mountain-layer mountain-mid" fill="#081018" opacity="0.7" d="M0,500 L0,400 L100,360 L220,400 L380,320 L500,370 L680,280 L850,340 L1000,260 L1180,320 L1320,250 L1480,310 L1640,270 L1800,330 L1920,290 L1920,500 Z"/>
      <!-- Near mountains -->
      <path class="mountain-layer mountain-near" fill="#040810" d="M0,500 L0,420 L80,390 L200,420 L340,350 L480,400 L620,320 L800,380 L950,300 L1120,360 L1280,290 L1440,350 L1600,300 L1760,360 L1920,320 L1920,500 Z"/>
    </svg>

    <!-- Water/Lake Reflection -->
    <div class="water-reflection"></div>
  </div>

  <div class="scroll-container">
    <!-- HERO SECTION -->
    <section class="hero" id="hero">
      <!-- Hero Content -->
      <div class="hero-content">
        <h1 class="hero-title">Kajo</h1>
        <p class="hero-subtitle">Faint light in darkness</p>
        <p class="hero-tagline">A Nordic Investment Firm</p>
      </div>

      <!-- Scroll Indicator -->
      <div class="scroll-indicator">
        <span>Scroll</span>
        <div class="scroll-line"></div>
      </div>
    </section>

    <!-- ABOUT SECTION - LEFT PANEL -->
    <section class="section" id="about">
      <div class="panel panel-left panel-light">
        <div class="section-container">
          <span class="section-label">Who We Are</span>
          <h2 class="section-title">Building legacies<br>in northern light</h2>
          <p class="section-description">
            We find exceptional companies and nurture them toward their full potential. Like the faint aurora that heralds the dawn, we see promise where others see only darkness.
          </p>

          <div class="philosophy-list">
            <div class="philosophy-item">
              <div class="philosophy-icon">
                <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>
              </div>
              <div class="philosophy-text">
                <h4>Patient Capital</h4>
                <p>We think in decades, not quarters.</p>
              </div>
            </div>
            <div class="philosophy-item">
              <div class="philosophy-icon">
                <svg viewBox="0 0 24 24"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/></svg>
              </div>
              <div class="philosophy-text">
                <h4>Operational Excellence</h4>
                <p>We partner, build, and transform alongside founders.</p>
              </div>
            </div>
            <div class="philosophy-item">
              <div class="philosophy-icon">
                <svg viewBox="0 0 24 24"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
              </div>
              <div class="philosophy-text">
                <h4>Nordic Values</h4>
                <p>Trust, transparency, and sisu.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- SELLERS SECTION - RIGHT PANEL -->
    <section class="section" id="sellers">
      <div class="panel panel-right panel-dark">
        <div class="section-container">
          <span class="section-label">For Sellers</span>
          <h2 class="section-title">Your legacy,<br>protected</h2>
          <p class="section-description">
            When it's time to transition, we offer more than capital.
          </p>

          <div class="simple-list">
            <div class="simple-list-item">Thoughtful transitions that honor your culture</div>
            <div class="simple-list-item">Long-term partnership, not a quick exit</div>
            <div class="simple-list-item">Fair valuations, honest conversations</div>
          </div>

          <a href="#" class="cta-button">
            Start a conversation
            <svg viewBox="0 0 24 24"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
          </a>
        </div>
      </div>
    </section>

    <!-- INVESTORS SECTION - LEFT PANEL -->
    <section class="section" id="investors">
      <div class="panel panel-left panel-twilight">
        <div class="section-container">
          <span class="section-label">For Investors</span>
          <h2 class="section-title">Patient capital,<br>exceptional returns</h2>
          <p class="section-description">
            We partner with those who share our long-term vision.
          </p>

          <div class="simple-list">
            <div class="simple-list-item">Institutional investors and family offices</div>
            <div class="simple-list-item">Fund structure that rewards patience</div>
            <div class="simple-list-item">Nordic values, global perspective</div>
          </div>

          <a href="#" class="cta-button">
            Investment opportunities
            <svg viewBox="0 0 24 24"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
          </a>
        </div>
      </div>
    </section>

    <!-- OPERATORS SECTION - RIGHT PANEL -->
    <section class="section" id="operators">
      <div class="panel panel-right panel-light">
        <div class="section-container">
          <span class="section-label">For Operators</span>
          <h2 class="section-title">Build something<br>remarkable</h2>
          <p class="section-description">
            We're looking for exceptional talent to shape the future.
          </p>

          <div class="simple-list">
            <div class="simple-list-item">Leadership roles with real ownership</div>
            <div class="simple-list-item">Operating partners across our portfolio</div>
            <div class="simple-list-item">Advisory network with flexible engagement</div>
          </div>

          <a href="#" class="cta-button">
            View opportunities
            <svg viewBox="0 0 24 24"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
          </a>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer>
      <div class="footer-content">
        <div class="footer-logo">Kajo</div>
        <p class="footer-text">© 2026 Kajo Partners. Helsinki, Finland.</p>
        <div class="footer-links">
          <a href="#">Privacy</a>
          <a href="#">Terms</a>
          <a href="#">Contact</a>
        </div>
      </div>
    </footer>
  </div>

  <script>
    // ========== THREE.JS AURORA BOREALIS ==========
    function initAurora() {
      const canvas = document.getElementById('aurora-canvas');
      if (!canvas) return;

      const scene = new THREE.Scene();
      const camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1);
      const renderer = new THREE.WebGLRenderer({
        canvas: canvas,
        antialias: true,
        alpha: false
      });

      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

      // Aurora Shader
      const vertexShader = `
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = vec4(position, 1.0);
        }
      `;

      const fragmentShader = `
        uniform float uTime;
        uniform vec2 uResolution;
        varying vec2 vUv;

        // Simplex noise functions
        vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
        vec2 mod289(vec2 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
        vec3 permute(vec3 x) { return mod289(((x*34.0)+1.0)*x); }

        float snoise(vec2 v) {
          const vec4 C = vec4(0.211324865405187, 0.366025403784439,
                             -0.577350269189626, 0.024390243902439);
          vec2 i  = floor(v + dot(v, C.yy));
          vec2 x0 = v -   i + dot(i, C.xx);
          vec2 i1;
          i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);
          vec4 x12 = x0.xyxy + C.xxzz;
          x12.xy -= i1;
          i = mod289(i);
          vec3 p = permute(permute(i.y + vec3(0.0, i1.y, 1.0))
            + i.x + vec3(0.0, i1.x, 1.0));
          vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy),
            dot(x12.zw,x12.zw)), 0.0);
          m = m*m;
          m = m*m;
          vec3 x = 2.0 * fract(p * C.www) - 1.0;
          vec3 h = abs(x) - 0.5;
          vec3 ox = floor(x + 0.5);
          vec3 a0 = x - ox;
          m *= 1.79284291400159 - 0.85373472095314 * (a0*a0 + h*h);
          vec3 g;
          g.x  = a0.x  * x0.x  + h.x  * x0.y;
          g.yz = a0.yz * x12.xz + h.yz * x12.yw;
          return 130.0 * dot(m, g);
        }

        // Fractal Brownian Motion
        float fbm(vec2 p) {
          float value = 0.0;
          float amplitude = 0.5;
          float frequency = 1.0;
          for (int i = 0; i < 6; i++) {
            value += amplitude * snoise(p * frequency);
            frequency *= 2.0;
            amplitude *= 0.5;
          }
          return value;
        }

        // Aurora ribbon function
        float auroraRibbon(vec2 uv, float time, float offset, float speed, float width) {
          float y = uv.y + offset;
          float wave1 = snoise(vec2(uv.x * 2.0 + time * speed, time * 0.1)) * 0.15;
          float wave2 = snoise(vec2(uv.x * 4.0 - time * speed * 0.7, time * 0.15 + 10.0)) * 0.08;
          float wave3 = snoise(vec2(uv.x * 8.0 + time * speed * 0.3, time * 0.2 + 20.0)) * 0.04;
          float displacement = wave1 + wave2 + wave3;

          float ribbon = smoothstep(width, 0.0, abs(y - 0.5 - displacement));
          ribbon *= smoothstep(0.0, 0.3, uv.y) * smoothstep(1.0, 0.6, uv.y);

          // Add intensity variation
          float intensity = snoise(vec2(uv.x * 3.0 + time * 0.5, time * 0.1)) * 0.5 + 0.5;
          ribbon *= 0.5 + intensity * 0.5;

          return ribbon;
        }

        void main() {
          vec2 uv = vUv;
          float aspectRatio = uResolution.x / uResolution.y;
          vec2 scaledUv = vec2(uv.x * aspectRatio, uv.y);

          float time = uTime * 0.15;

          // Deep night sky gradient
          vec3 skyTop = vec3(0.01, 0.02, 0.05);
          vec3 skyMid = vec3(0.02, 0.04, 0.08);
          vec3 skyBottom = vec3(0.01, 0.03, 0.06);
          vec3 sky = mix(skyBottom, skyMid, smoothstep(0.0, 0.5, uv.y));
          sky = mix(sky, skyTop, smoothstep(0.5, 1.0, uv.y));

          // Stars
          float stars = 0.0;
          for (float i = 0.0; i < 3.0; i++) {
            vec2 starUv = scaledUv * (50.0 + i * 30.0);
            float star = snoise(starUv + i * 100.0);
            star = pow(max(0.0, star), 20.0) * (0.3 + 0.7 * sin(time * 2.0 + i));
            stars += star * (0.5 + i * 0.2);
          }
          sky += vec3(stars * 0.8, stars * 0.9, stars);

          // Aurora colors
          vec3 auroraGreen1 = vec3(0.1, 0.9, 0.5);
          vec3 auroraGreen2 = vec3(0.2, 0.8, 0.4);
          vec3 auroraTeal = vec3(0.1, 0.7, 0.6);
          vec3 auroraPurple = vec3(0.4, 0.2, 0.6);
          vec3 auroraBlue = vec3(0.2, 0.4, 0.8);

          // Multiple aurora ribbons with different properties
          float ribbon1 = auroraRibbon(uv, time, 0.15, 0.3, 0.12);
          float ribbon2 = auroraRibbon(uv, time * 1.1, 0.05, 0.25, 0.10);
          float ribbon3 = auroraRibbon(uv, time * 0.9, 0.25, 0.35, 0.08);
          float ribbon4 = auroraRibbon(uv, time * 1.2, -0.05, 0.2, 0.15);
          float ribbon5 = auroraRibbon(uv, time * 0.8, 0.35, 0.28, 0.06);

          // Color mixing based on position and noise
          float colorMix = fbm(scaledUv * 0.5 + time * 0.1) * 0.5 + 0.5;
          float colorMix2 = fbm(scaledUv * 0.3 - time * 0.05 + 50.0) * 0.5 + 0.5;

          vec3 aurora1Color = mix(auroraGreen1, auroraGreen2, colorMix);
          vec3 aurora2Color = mix(auroraTeal, auroraGreen1, colorMix2);
          vec3 aurora3Color = mix(auroraGreen2, auroraTeal, colorMix);
          vec3 aurora4Color = mix(auroraGreen1, auroraPurple, colorMix2 * 0.3);
          vec3 aurora5Color = mix(auroraTeal, auroraBlue, colorMix * 0.4);

          // Combine aurora layers
          vec3 aurora = vec3(0.0);
          aurora += aurora1Color * ribbon1 * 0.7;
          aurora += aurora2Color * ribbon2 * 0.6;
          aurora += aurora3Color * ribbon3 * 0.5;
          aurora += aurora4Color * ribbon4 * 0.8;
          aurora += aurora5Color * ribbon5 * 0.4;

          // Add glow effect
          float glow = (ribbon1 + ribbon2 + ribbon3 + ribbon4 + ribbon5) * 0.15;
          vec3 glowColor = mix(auroraGreen1, auroraTeal, 0.5) * glow;
          aurora += glowColor;

          // Add subtle vertical rays
          float rays = 0.0;
          for (float i = 0.0; i < 5.0; i++) {
            float rayX = snoise(vec2(i * 10.0, time * 0.2)) * 0.5 + 0.5;
            float ray = smoothstep(0.02, 0.0, abs(uv.x - rayX));
            ray *= smoothstep(0.3, 0.7, uv.y) * smoothstep(1.0, 0.5, uv.y);
            ray *= snoise(vec2(uv.y * 20.0 + time + i, i)) * 0.5 + 0.5;
            rays += ray * 0.1;
          }
          aurora += auroraGreen1 * rays;

          // Final composition
          vec3 color = sky + aurora;

          // Add subtle vignette
          float vignette = 1.0 - smoothstep(0.5, 1.5, length(uv - 0.5) * 1.5);
          color *= 0.7 + vignette * 0.3;

          // Tone mapping
          color = color / (color + vec3(1.0));
          color = pow(color, vec3(0.95));

          gl_FragColor = vec4(color, 1.0);
        }
      `;

      const geometry = new THREE.PlaneGeometry(2, 2);
      const material = new THREE.ShaderMaterial({
        vertexShader: vertexShader,
        fragmentShader: fragmentShader,
        uniforms: {
          uTime: { value: 0 },
          uResolution: { value: new THREE.Vector2(window.innerWidth, window.innerHeight) }
        }
      });

      const mesh = new THREE.Mesh(geometry, material);
      scene.add(mesh);

      // Animation loop
      function animate() {
        material.uniforms.uTime.value += 0.016;
        renderer.render(scene, camera);
        requestAnimationFrame(animate);
      }

      // Handle resize
      window.addEventListener('resize', () => {
        renderer.setSize(window.innerWidth, window.innerHeight);
        material.uniforms.uResolution.value.set(window.innerWidth, window.innerHeight);
      });

      animate();
    }

    // ========== SMOOTH SCROLL (Lenis-style) ==========
    class SmoothScroll {
      constructor() {
        this.currentY = 0;
        this.targetY = 0;
        this.ease = 0.075;
        this.rafId = null;
        this.init();
      }

      init() {
        document.documentElement.classList.add('lenis');
        this.update();
      }

      update() {
        this.targetY = window.scrollY;
        this.currentY += (this.targetY - this.currentY) * this.ease;

        // Update CSS custom property for parallax
        const hero = document.querySelector('.hero');
        if (hero) {
          const heroHeight = hero.offsetHeight;
          const progress = Math.min(this.currentY / (heroHeight * 0.5), 1);
          document.documentElement.style.setProperty('--scroll-progress', progress);
        }

        this.rafId = requestAnimationFrame(() => this.update());
      }
    }

    // ========== SNOW PARTICLES ==========
    function createSnow() {
      const container = document.getElementById('snow');
      const particleCount = 50;

      for (let i = 0; i < particleCount; i++) {
        const snowflake = document.createElement('div');
        snowflake.className = 'snowflake';
        snowflake.style.left = Math.random() * 100 + '%';
        snowflake.style.animationDuration = (Math.random() * 10 + 10) + 's';
        snowflake.style.animationDelay = Math.random() * 10 + 's';
        snowflake.style.width = (Math.random() * 3 + 2) + 'px';
        snowflake.style.height = snowflake.style.width;
        snowflake.style.opacity = Math.random() * 0.5 + 0.3;
        container.appendChild(snowflake);
      }
    }

    // ========== INTERSECTION OBSERVER FOR ANIMATIONS ==========
    function setupScrollAnimations() {
      const sections = document.querySelectorAll('.section');

      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('in-view');

            // Update section indicator
            const sectionId = entry.target.id;
            document.querySelectorAll('.indicator-dot').forEach(dot => {
              dot.classList.toggle('active', dot.dataset.section === sectionId);
            });

            // Update nav links
            document.querySelectorAll('.nav-links a').forEach(link => {
              link.classList.toggle('active', link.getAttribute('href') === '#' + sectionId);
            });
          }
        });
      }, {
        threshold: 0.3,
        rootMargin: '-10% 0px -10% 0px'
      });

      sections.forEach(section => observer.observe(section));

      // Also observe hero
      const hero = document.querySelector('.hero');
      const heroObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting && entry.intersectionRatio > 0.5) {
            document.querySelectorAll('.indicator-dot').forEach(dot => {
              dot.classList.toggle('active', dot.dataset.section === 'hero');
            });
          }
        });
      }, { threshold: 0.5 });
      heroObserver.observe(hero);
    }

    // ========== SECTION INDICATOR CLICKS ==========
    function setupIndicatorClicks() {
      document.querySelectorAll('.indicator-dot').forEach(dot => {
        dot.addEventListener('click', () => {
          const sectionId = dot.dataset.section;
          const section = document.getElementById(sectionId);
          if (section) {
            section.scrollIntoView({ behavior: 'smooth' });
          }
        });
      });
    }

    // ========== GSAP SCROLL EFFECTS ==========
    function setupGSAPEffects() {
      gsap.registerPlugin(ScrollTrigger);

      // Hero content fade out
      gsap.to('.hero-content', {
        opacity: 0,
        y: -50,
        ease: 'none',
        scrollTrigger: {
          trigger: '.hero',
          start: 'top top',
          end: 'bottom 60%',
          scrub: true
        }
      });

      // Scroll indicator fade
      gsap.to('.scroll-indicator', {
        opacity: 0,
        scrollTrigger: {
          trigger: '.hero',
          start: 'top top',
          end: '+=200',
          scrub: true
        }
      });

      // Panels fly in/out from their sides
      document.querySelectorAll('.panel').forEach(panel => {
        const isLeft = panel.classList.contains('panel-left');
        const xStart = isLeft ? '-40%' : '40%';

        // Set initial state
        gsap.set(panel, { x: xStart, opacity: 0.5 });

        // Fly in
        gsap.to(panel, {
          x: '0%',
          opacity: 1,
          ease: 'none',
          scrollTrigger: {
            trigger: panel.closest('.section'),
            start: 'top 90%',
            end: 'top 40%',
            scrub: 1
          }
        });

        // Fly out
        gsap.to(panel, {
          x: xStart,
          opacity: 0.5,
          ease: 'none',
          scrollTrigger: {
            trigger: panel.closest('.section'),
            start: 'bottom 60%',
            end: 'bottom 10%',
            scrub: 1
          }
        });
      });
    }

    // Pass scroll position to aurora shader
    let auroraScrollValue = 0;
    function updateAuroraScroll() {
      const scrollY = window.scrollY;
      const maxScroll = document.body.scrollHeight - window.innerHeight;
      auroraScrollValue = scrollY / maxScroll;
    }

    // ========== INITIALIZE ==========
    document.addEventListener('DOMContentLoaded', () => {
      initAurora();
      setupGSAPEffects();
      setupScrollAnimations();
      setupIndicatorClicks();

      // Update aurora on scroll
      window.addEventListener('scroll', updateAuroraScroll, { passive: true });
    });
  </script>
</body>
</html>
